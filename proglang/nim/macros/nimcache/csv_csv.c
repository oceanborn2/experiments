/* Generated by Nim Compiler v0.14.2 */
/*   (c) 2015 Andreas Rumpf */
/* The generated code is subject to the original license. */
/* Compiled for: Linux, amd64, gcc */
/* Command for C compiler:
   gcc -c  -w  -I/usr/lib/nim -o /run/media/pascal/Acer/experiments/proglang/nim/macros/nimcache/csv_csv.o /run/media/pascal/Acer/experiments/proglang/nim/macros/nimcache/csv_csv.c */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY16005 TY16005;
typedef struct TY155267 TY155267;
typedef struct Slice90651 Slice90651;
typedef struct Cell48305 Cell48305;
typedef struct TNimType TNimType;
typedef struct Cellseq48321 Cellseq48321;
typedef struct Gcheap50818 Gcheap50818;
typedef struct Gcstack50816 Gcstack50816;
typedef struct Memregion30486 Memregion30486;
typedef struct Smallchunk30440 Smallchunk30440;
typedef struct Llchunk30480 Llchunk30480;
typedef struct Bigchunk30442 Bigchunk30442;
typedef struct Intset30414 Intset30414;
typedef struct Trunk30410 Trunk30410;
typedef struct Avlnode30484 Avlnode30484;
typedef struct Gcstat50814 Gcstat50814;
typedef struct Cellset48317 Cellset48317;
typedef struct Pagedesc48313 Pagedesc48313;
typedef struct Stringstreamobj150177 Stringstreamobj150177;
typedef struct Csvparser154004 Csvparser154004;
typedef struct Baselexer151005 Baselexer151005;
typedef struct TNimObject TNimObject;
typedef struct TNimNode TNimNode;
typedef struct Streamobj149218 Streamobj149218;
typedef struct Basechunk30438 Basechunk30438;
typedef struct Freecell30430 Freecell30430;
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
typedef NU8 char136Set[32];
struct  Slice90651  {
NI a;
NI b;
};
struct  Cell48305  {
NI refcount;
TNimType* typ;
};
struct  Cellseq48321  {
NI len;
NI cap;
Cell48305** d;
};
typedef Smallchunk30440* TY30501[512];
typedef Trunk30410* Trunkbuckets30412[256];
struct  Intset30414  {
Trunkbuckets30412 data;
};
struct  Memregion30486  {
NI minlargeobj;
NI maxlargeobj;
TY30501 freesmallchunks;
Llchunk30480* llmem;
NI currmem;
NI maxmem;
NI freemem;
NI lastsize;
Bigchunk30442* freechunkslist;
Intset30414 chunkstarts;
Avlnode30484* root;
Avlnode30484* deleted;
Avlnode30484* last;
Avlnode30484* freeavlnodes;
NIM_BOOL locked;
};
struct  Gcstat50814  {
NI stackscans;
NI cyclecollections;
NI maxthreshold;
NI maxstacksize;
NI maxstackcells;
NI cycletablesize;
NI64 maxpause;
};
struct  Cellset48317  {
NI counter;
NI max;
Pagedesc48313* head;
Pagedesc48313** data;
};
struct  Gcheap50818  {
Gcstack50816* stack;
void* stackbottom;
NI cyclethreshold;
Cellseq48321 zct;
Cellseq48321 decstack;
Cellseq48321 tempstack;
NI recgclock;
Memregion30486 region;
Gcstat50814 stat;
Cellset48317 marked;
Cellseq48321 additionalroots;
};
typedef NU8 Tnimkind3203;
typedef NU8 Tnimtypeflag3209Set;
typedef N_NIMCALL_PTR(void, TY3289) (void* p0, NI op0);
typedef N_NIMCALL_PTR(void*, TY3294) (void* p0);
struct  TNimType  {
NI size;
Tnimkind3203 kind;
Tnimtypeflag3209Set flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY3289 marker;
TY3294 deepcopy;
};
struct  TNimObject  {
TNimType* m_type;
};
struct  Baselexer151005  {
  TNimObject Sup;
NI bufpos;
NCSTRING buf;
NI buflen;
Streamobj149218* input;
NI linenumber;
NI sentinel;
NI linestart;
char136Set refillchars;
};
struct  Csvparser154004  {
  Baselexer151005 Sup;
TY16005* row;
NimStringDesc* filename;
NIM_CHAR sep;
NIM_CHAR quote;
NIM_CHAR esc;
NIM_BOOL skipwhite;
NI currrow;
};
typedef NU8 Tnimnodekind3205;
struct  TNimNode  {
Tnimnodekind3205 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct  Gcstack50816  {
Gcstack50816* prev;
Gcstack50816* next;
void* starts;
void* pos;
NI maxstacksize;
};
struct  Basechunk30438  {
NI prevsize;
NI size;
NIM_BOOL used;
};
struct  Smallchunk30440  {
  Basechunk30438 Sup;
Smallchunk30440* next;
Smallchunk30440* prev;
Freecell30430* freelist;
NI free;
NI acc;
NF data;
};
struct  Llchunk30480  {
NI size;
NI acc;
Llchunk30480* next;
};
struct  Bigchunk30442  {
  Basechunk30438 Sup;
Bigchunk30442* next;
Bigchunk30442* prev;
NI align;
NF data;
};
typedef NI TY30419[8];
struct  Trunk30410  {
Trunk30410* next;
NI key;
TY30419 bits;
};
typedef Avlnode30484* TY30491[2];
struct  Avlnode30484  {
TY30491 link;
NI key;
NI upperbound;
NI level;
};
struct  Pagedesc48313  {
Pagedesc48313* next;
NI key;
TY30419 bits;
};
typedef N_NIMCALL_PTR(void, TY149219) (Streamobj149218* s0);
typedef N_NIMCALL_PTR(NIM_BOOL, TY149223) (Streamobj149218* s0);
typedef N_NIMCALL_PTR(void, TY149227) (Streamobj149218* s0, NI pos0);
typedef N_NIMCALL_PTR(NI, TY149232) (Streamobj149218* s0);
typedef N_NIMCALL_PTR(NI, TY149236) (Streamobj149218* s0, void* buffer0, NI buflen0);
typedef N_NIMCALL_PTR(NI, TY149242) (Streamobj149218* s0, void* buffer0, NI buflen0);
typedef N_NIMCALL_PTR(void, TY149248) (Streamobj149218* s0, void* buffer0, NI buflen0);
typedef N_NIMCALL_PTR(void, TY149254) (Streamobj149218* s0);
struct  Streamobj149218  {
  TNimObject Sup;
TY149219 closeimpl;
TY149223 atendimpl;
TY149227 setpositionimpl;
TY149232 getpositionimpl;
TY149236 readdataimpl;
TY149242 peekdataimpl;
TY149248 writedataimpl;
TY149254 flushimpl;
};
struct  Stringstreamobj150177  {
  Streamobj149218 Sup;
NimStringDesc* data;
NI pos;
};
struct  Freecell30430  {
Freecell30430* next;
NI zerofield;
};
struct TY16005 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY155267 {
  TGenericSeq Sup;
  TY16005* data[SEQ_DECL_SIZE];
};
N_NIMCALL(NIM_BOOL, checkending_155001_2766820254)(NimStringDesc* csv0, NIM_CHAR separator0);
N_NIMCALL(TY16005*, nsuSplitLines)(NimStringDesc* s0);
N_NOINLINE(void, raiseIndexError)(void);
N_NIMCALL(NIM_BOOL, nsuEndsWith)(NimStringDesc* s0, NimStringDesc* suffix0);
static N_INLINE(void, appendString)(NimStringDesc* dest0, NimStringDesc* src0);
static N_INLINE(void, appendChar)(NimStringDesc* dest0, NIM_CHAR c0);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space0);
static N_INLINE(NI, addInt)(NI a0, NI b0);
N_NOINLINE(void, raiseOverflow)(void);
N_NIMCALL(void, failedassertimpl_91239_1689653243)(NimStringDesc* msg0);
static N_INLINE(void, nimFrame)(TFrame* s0);
N_NOINLINE(void, stackoverflow_22401_1689653243)(void);
static N_INLINE(void, popFrame)(void);
N_NIMCALL(TY155267*, newseq_155262_1689653243)(NI len0);
N_NIMCALL(TY16005*, newseq_155311_1689653243)(NI len0);
N_NIMCALL(TY155267*, parseall_155210_2766820254)(NimStringDesc* csv0, NimStringDesc* filenameout0, NIM_CHAR separator0, NIM_CHAR quote0, NIM_CHAR escape0, NIM_BOOL skipinitialspace0, NIM_BOOL skipblanklast0);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* s0, NIM_BOOL leading0, NIM_BOOL trailing0, char136Set chars0);
static N_INLINE(NimStringDesc*, HEX5BHEX5D_90644_1689653243)(NimStringDesc* s0, Slice90651 x0);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s0, NI start_80010_1689653243, NI last0);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s0, NI first0, NI last0);
static N_INLINE(Slice90651, HEX2EHEX2E_110248_1689653243)(NI a0, NI b0);
static N_INLINE(NI, subInt)(NI a0, NI b0);
static N_INLINE(void, asgnRefNoCycle)(void** dest0, void* src0);
static N_INLINE(Cell48305*, usrtocell_52440_1689653243)(void* usr0);
static N_INLINE(void, rtladdzct_53601_1689653243)(Cell48305* c0);
N_NOINLINE(void, addzct_52417_1689653243)(Cellseq48321* s0, Cell48305* c0);
N_NIMCALL(NimStringDesc*, nsuJoinSep)(NimStringDesc** a0, NI a0Len0, NimStringDesc* sep0);
N_NIMCALL(Stringstreamobj150177*, newstringstream_150262_1780494535)(NimStringDesc* s0);
N_NIMCALL(void, open_154040_3966374559)(Csvparser154004* my0, Streamobj149218* input0, NimStringDesc* filename0, NIM_CHAR separator0, NIM_CHAR quote0, NIM_CHAR escape0, NIM_BOOL skipinitialspace0);
static N_INLINE(NI, chckRange)(NI i0, NI a0, NI b0);
N_NOINLINE(void, raiseRangeError)(NI64 val0);
N_NIMCALL(NIM_BOOL, readrow_154191_3966374559)(Csvparser154004* my0, NI columns0);
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src0);
static N_INLINE(void, nimGCunrefNoCycle)(void* p0);
N_NIMCALL(void, genericSeqAssign)(void* dest0, void* src_86404_1689653243, TNimType* mt0);
N_NIMCALL(TY155267*, readall_155386_2766820254)(NimStringDesc* filename0, NimStringDesc* filenameout0, NIM_CHAR separator0, NIM_CHAR quote0, NIM_CHAR escape0, NIM_BOOL skipinitialspace0, NIM_BOOL skipblanklast0);
N_NIMCALL(NimStringDesc*, readfile_15666_1689653243)(NimStringDesc* filename0);
N_NIMCALL(NimStringDesc*, stringifyall_155400_2766820254)(TY155267* csv0, NimStringDesc* separator0, NIM_BOOL escapequotes0, NIM_BOOL quotealways0, NIM_BOOL spacebetweenfields0);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src0);
N_NIMCALL(NIM_BOOL, contains_111028_4286263276)(NimStringDesc* s0, NimStringDesc* sub0);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* s0, NimStringDesc* sub0, NimStringDesc* by0);
N_NIMCALL(NimStringDesc*, quoteifcontainswhite_111018_4286263276)(NimStringDesc* s0);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest0, NI addlen0);
N_NIMCALL(NimStringDesc*, writeall_155459_2766820254)(NimStringDesc* filename0, TY155267* csv0, NimStringDesc* separator0, NIM_BOOL escapequotes0, NIM_BOOL quotealways0, NIM_BOOL spacebetweenfields0);
N_NIMCALL(void, writefile_15669_1689653243)(NimStringDesc* filename0, NimStringDesc* content0);
STRING_LITERAL(TMP706, "", 0);
STRING_LITERAL(TMP708, "len(a) == L seq modified while iterating over it", 48);
static NIM_CONST char136Set TMP710 = {
0x00, 0x3E, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP714, "\012", 1);
STRING_LITERAL(TMP720, " ", 1);
STRING_LITERAL(TMP721, "\"", 1);
STRING_LITERAL(TMP722, "\'", 1);
STRING_LITERAL(TMP723, "\\\"", 2);
STRING_LITERAL(TMP724, "\\\'", 2);
extern TFrame* frameptr_19636_1689653243;
extern Gcheap50818 gch_50858_1689653243;
extern TNimType NTI154004; /* CsvParser */
extern TNimType NTI16005; /* seq[string] */
extern TNimType NTI155267; /* seq[seq[string]] */

static N_INLINE(void, appendString)(NimStringDesc* dest0, NimStringDesc* src0) {
	memcpy(((NCSTRING) ((&(*dest0).data[((*dest0).Sup.len)- 0]))), ((NCSTRING) ((*src0).data)), (NI)((*src0).Sup.len + ((NI) 1)));
	(*dest0).Sup.len += (*src0).Sup.len;
}

static N_INLINE(void, appendChar)(NimStringDesc* dest0, NIM_CHAR c0) {
	(*dest0).data[((*dest0).Sup.len)- 0] = c0;
	(*dest0).data[((NI)((*dest0).Sup.len + ((NI) 1)))- 0] = 0;
	(*dest0).Sup.len += ((NI) 1);
}

static N_INLINE(NI, addInt)(NI a0, NI b0) {
	NI result0;
{	result0 = (NI)0;
	result0 = (NI)((NU64)(a0) + (NU64)(b0));
	{
		NIM_BOOL LOC3;
		LOC3 = (NIM_BOOL)0;
		LOC3 = (((NI) 0) <= (NI)(result0 ^ a0));
		if (LOC3) goto LA4;
		LOC3 = (((NI) 0) <= (NI)(result0 ^ b0));
		LA4: ;
		if (!LOC3) goto LA5;
		goto BeforeRet;
	}
	LA5: ;
	raiseOverflow();
	}BeforeRet: ;
	return result0;
}

static N_INLINE(void, nimFrame)(TFrame* s0) {
	NI LOC1;
	LOC1 = (NI)0;
	{
		if (!(frameptr_19636_1689653243 == NIM_NIL)) goto LA4;
		LOC1 = ((NI) 0);
	}
	goto LA2;
	LA4: ;
	{
		LOC1 = ((NI) ((NI16)((*frameptr_19636_1689653243).calldepth + ((NI16) 1))));
	}
	LA2: ;
	(*s0).calldepth = ((NI16) (LOC1));
	(*s0).prev = frameptr_19636_1689653243;
	frameptr_19636_1689653243 = s0;
	{
		if (!((*s0).calldepth == ((NI16) 2000))) goto LA9;
		stackoverflow_22401_1689653243();
	}
	LA9: ;
}

static N_INLINE(void, popFrame)(void) {
	frameptr_19636_1689653243 = (*frameptr_19636_1689653243).prev;
}

N_NIMCALL(NIM_BOOL, checkending_155001_2766820254)(NimStringDesc* csv0, NIM_CHAR separator0) {
	NIM_BOOL result0;
	TY16005* lines0;
	nimfr("checkEnding", "csv.nim")
{	result0 = (NIM_BOOL)0;
	nimln(16, "csv.nim");
	lines0 = nsuSplitLines(csv0);
	{
		NimStringDesc* line_155202_2766820254;
		NI i_155207_2766820254;
		NI L_155209_2766820254;
		line_155202_2766820254 = (NimStringDesc*)0;
		nimln(3415, "system.nim");
		i_155207_2766820254 = ((NI) 0);
		nimln(3416, "system.nim");
		L_155209_2766820254 = (lines0 ? lines0->Sup.len : 0);
		{
			nimln(3417, "system.nim");
			while (1) {
				NI TMP707;
				if (!(i_155207_2766820254 < L_155209_2766820254)) goto LA3;
				nimln(3418, "system.nim");
				if ((NU)(i_155207_2766820254) >= (NU)(lines0->Sup.len)) raiseIndexError();
				line_155202_2766820254 = lines0->data[i_155207_2766820254];
				nimln(18, "csv.nim");
				{
					NimStringDesc* LOC6;
					NIM_BOOL LOC7;
					LOC6 = (NimStringDesc*)0;
					LOC6 = rawNewString(1);
appendString(LOC6, ((NimStringDesc*) &TMP706));
appendChar(LOC6, separator0);
					LOC7 = (NIM_BOOL)0;
					LOC7 = nsuEndsWith(line_155202_2766820254, LOC6);
					if (!!(LOC7)) goto LA8;
					nimln(19, "csv.nim");
					result0 = NIM_FALSE;
					goto BeforeRet;
				}
				LA8: ;
				nimln(3419, "system.nim");
				TMP707 = addInt(i_155207_2766820254, ((NI) 1));
				i_155207_2766820254 = (NI)(TMP707);
				nimln(3420, "system.nim");
				{
					if (!!(((lines0 ? lines0->Sup.len : 0) == L_155209_2766820254))) goto LA12;
					failedassertimpl_91239_1689653243(((NimStringDesc*) &TMP708));
				}
				LA12: ;
			} LA3: ;
		}
	}
	nimln(20, "csv.nim");
	result0 = NIM_TRUE;
	goto BeforeRet;
	}BeforeRet: ;
	popFrame();
	return result0;
}

static N_INLINE(NimStringDesc*, HEX5BHEX5D_90644_1689653243)(NimStringDesc* s0, Slice90651 x0) {
	NimStringDesc* result0;
	nimfr("[]", "system.nim")
	result0 = (NimStringDesc*)0;
	nimln(3189, "system.nim");
	result0 = copyStrLast(s0, x0.a, x0.b);
	popFrame();
	return result0;
}

static N_INLINE(Slice90651, HEX2EHEX2E_110248_1689653243)(NI a0, NI b0) {
	Slice90651 result0;
	nimfr("..", "system.nim")
	memset((void*)(&result0), 0, sizeof(result0));
	nimln(270, "system.nim");
	result0.a = a0;
	nimln(271, "system.nim");
	result0.b = b0;
	popFrame();
	return result0;
}

static N_INLINE(NI, subInt)(NI a0, NI b0) {
	NI result0;
{	result0 = (NI)0;
	result0 = (NI)((NU64)(a0) - (NU64)(b0));
	{
		NIM_BOOL LOC3;
		LOC3 = (NIM_BOOL)0;
		LOC3 = (((NI) 0) <= (NI)(result0 ^ a0));
		if (LOC3) goto LA4;
		LOC3 = (((NI) 0) <= (NI)(result0 ^ (NI)((NU64) ~(b0))));
		LA4: ;
		if (!LOC3) goto LA5;
		goto BeforeRet;
	}
	LA5: ;
	raiseOverflow();
	}BeforeRet: ;
	return result0;
}

static N_INLINE(Cell48305*, usrtocell_52440_1689653243)(void* usr0) {
	Cell48305* result0;
	nimfr("usrToCell", "gc.nim")
	result0 = (Cell48305*)0;
	nimln(131, "gc.nim");
	result0 = ((Cell48305*) ((NI)((NU64)(((NI) (usr0))) - (NU64)(((NI)sizeof(Cell48305))))));
	popFrame();
	return result0;
}

static N_INLINE(void, rtladdzct_53601_1689653243)(Cell48305* c0) {
	nimfr("rtlAddZCT", "gc.nim")
	nimln(211, "gc.nim");
	addzct_52417_1689653243((&gch_50858_1689653243.zct), c0);
	popFrame();
}

static N_INLINE(void, asgnRefNoCycle)(void** dest0, void* src0) {
	nimfr("asgnRefNoCycle", "gc.nim")
	nimln(271, "gc.nim");
	{
		Cell48305* c0;
		nimln(343, "system.nim");
		if (!!((src0 == NIM_NIL))) goto LA3;
		nimln(272, "gc.nim");
		c0 = usrtocell_52440_1689653243(src0);
		nimln(179, "gc.nim");
		(*c0).refcount += ((NI) 8);
	}
	LA3: ;
	nimln(274, "gc.nim");
	{
		Cell48305* c0;
		nimln(343, "system.nim");
		if (!!(((*dest0) == NIM_NIL))) goto LA7;
		nimln(275, "gc.nim");
		c0 = usrtocell_52440_1689653243((*dest0));
		nimln(276, "gc.nim");
		{
			nimln(177, "gc.nim");
			(*c0).refcount -= ((NI) 8);
			nimln(178, "gc.nim");
			if (!((NU64)((*c0).refcount) < (NU64)(((NI) 8)))) goto LA11;
			nimln(277, "gc.nim");
			rtladdzct_53601_1689653243(c0);
		}
		LA11: ;
	}
	LA7: ;
	nimln(278, "gc.nim");
	(*dest0) = src0;
	popFrame();
}

static N_INLINE(NI, chckRange)(NI i0, NI a0, NI b0) {
	NI result0;
{	result0 = (NI)0;
	{
		NIM_BOOL LOC3;
		LOC3 = (NIM_BOOL)0;
		LOC3 = (a0 <= i0);
		if (!(LOC3)) goto LA4;
		LOC3 = (i0 <= b0);
		LA4: ;
		if (!LOC3) goto LA5;
		result0 = i0;
		goto BeforeRet;
	}
	goto LA1;
	LA5: ;
	{
		raiseRangeError(((NI64) (i0)));
	}
	LA1: ;
	}BeforeRet: ;
	return result0;
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p0) {
	Cell48305* c0;
	nimfr("nimGCunrefNoCycle", "gc.nim")
	nimln(253, "gc.nim");
	c0 = usrtocell_52440_1689653243(p0);
	nimln(255, "gc.nim");
	{
		nimln(177, "gc.nim");
		(*c0).refcount -= ((NI) 8);
		nimln(178, "gc.nim");
		if (!((NU64)((*c0).refcount) < (NU64)(((NI) 8)))) goto LA3;
		nimln(256, "gc.nim");
		rtladdzct_53601_1689653243(c0);
	}
	LA3: ;
	popFrame();
}

N_NIMCALL(TY155267*, parseall_155210_2766820254)(NimStringDesc* csv0, NimStringDesc* filenameout0, NIM_CHAR separator0, NIM_CHAR quote0, NIM_CHAR escape0, NIM_BOOL skipinitialspace0, NIM_BOOL skipblanklast0) {
	TY155267* result0;
	NimStringDesc* newcsv0;
	Stringstreamobj150177* stream0;
	Csvparser154004 csvparser0;
	Streamobj149218* LOC11;
	TY155267* csvseq0;
	TY16005* LOC12;
	NI c0;
	nimfr("parseAll", "csv.nim")
{	result0 = (TY155267*)0;
	nimln(31, "csv.nim");
	newcsv0 = nsuStrip(csv0, NIM_TRUE, NIM_TRUE, TMP710);
	nimln(32, "csv.nim");
	{
		NIM_BOOL LOC3;
		TY16005* lines0;
		LOC3 = (NIM_BOOL)0;
		LOC3 = skipblanklast0;
		if (!(LOC3)) goto LA4;
		LOC3 = checkending_155001_2766820254(csv0, separator0);
		LA4: ;
		if (!LOC3) goto LA5;
		nimln(35, "csv.nim");
		lines0 = nsuSplitLines(newcsv0);
		{
			NI i_155234_2766820254;
			NI HEX3Atmp_155367_2766820254;
			NI res_155370_2766820254;
			i_155234_2766820254 = (NI)0;
			HEX3Atmp_155367_2766820254 = (NI)0;
			nimln(36, "csv.nim");
			HEX3Atmp_155367_2766820254 = (lines0 ? (lines0->Sup.len-1) : -1);
			nimln(1875, "system.nim");
			res_155370_2766820254 = ((NI) 0);
			{
				nimln(1876, "system.nim");
				while (1) {
					NI TMP711;
					Slice90651 LOC10;
					NI TMP712;
					if (!(res_155370_2766820254 <= HEX3Atmp_155367_2766820254)) goto LA9;
					nimln(1877, "system.nim");
					i_155234_2766820254 = res_155370_2766820254;
					nimln(37, "csv.nim");
					if ((NU)(i_155234_2766820254) >= (NU)(lines0->Sup.len)) raiseIndexError();
					if ((NU)(i_155234_2766820254) >= (NU)(lines0->Sup.len)) raiseIndexError();
					if ((NU)(i_155234_2766820254) >= (NU)(lines0->Sup.len)) raiseIndexError();
					TMP711 = subInt((lines0->data[i_155234_2766820254] ? lines0->data[i_155234_2766820254]->Sup.len : 0), ((NI) 1));
					LOC10 = HEX2EHEX2E_110248_1689653243(((NI) 0), (NI)(TMP711));
					asgnRefNoCycle((void**) (&lines0->data[i_155234_2766820254]), HEX5BHEX5D_90644_1689653243(lines0->data[i_155234_2766820254], LOC10));
					nimln(1896, "system.nim");
					TMP712 = addInt(res_155370_2766820254, ((NI) 1));
					res_155370_2766820254 = (NI)(TMP712);
				} LA9: ;
			}
		}
		nimln(38, "csv.nim");
		newcsv0 = nsuJoinSep(lines0->data, lines0->Sup.len, ((NimStringDesc*) &TMP714));
	}
	LA5: ;
	nimln(41, "csv.nim");
	stream0 = newstringstream_150262_1780494535(newcsv0);
	memset((void*)(&csvparser0), 0, sizeof(csvparser0));
	csvparser0.Sup.Sup.m_type = (&NTI154004);
	nimln(45, "csv.nim");
	LOC11 = (Streamobj149218*)0;
	LOC11 = &stream0->Sup;
	open_154040_3966374559((&csvparser0), LOC11, filenameout0, separator0, quote0, escape0, skipinitialspace0);
	nimln(48, "csv.nim");
	LOC12 = (TY16005*)0;
	LOC12 = nsuSplitLines(newcsv0);
	csvseq0 = newseq_155262_1689653243(((NI)chckRange((LOC12 ? LOC12->Sup.len : 0), ((NI) 0), ((NI) IL64(9223372036854775807)))));
	nimln(51, "csv.nim");
	c0 = ((NI) 0);
	{
		nimln(52, "csv.nim");
		while (1) {
			NIM_BOOL LOC15;
			TY16005* csvseq20;
			NI TMP719;
			LOC15 = (NIM_BOOL)0;
			LOC15 = readrow_154191_3966374559((&csvparser0), ((NI) 0));
			if (!LOC15) goto LA14;
			nimln(54, "csv.nim");
			csvseq20 = newseq_155311_1689653243(((NI)chckRange((csvparser0.row ? csvparser0.row->Sup.len : 0), ((NI) 0), ((NI) IL64(9223372036854775807)))));
			{
				NI i_155354_2766820254;
				NI HEX3Atmp_155379_2766820254;
				NI res_155382_2766820254;
				i_155354_2766820254 = (NI)0;
				HEX3Atmp_155379_2766820254 = (NI)0;
				nimln(55, "csv.nim");
				HEX3Atmp_155379_2766820254 = (csvparser0.row ? (csvparser0.row->Sup.len-1) : -1);
				nimln(1875, "system.nim");
				res_155382_2766820254 = ((NI) 0);
				{
					nimln(1876, "system.nim");
					while (1) {
						NimStringDesc* LOC19;
						NI TMP718;
						if (!(res_155382_2766820254 <= HEX3Atmp_155379_2766820254)) goto LA18;
						nimln(1877, "system.nim");
						i_155354_2766820254 = res_155382_2766820254;
						nimln(56, "csv.nim");
						if ((NU)(i_155354_2766820254) >= (NU)(csvseq20->Sup.len)) raiseIndexError();
						if ((NU)(i_155354_2766820254) >= (NU)(csvparser0.row->Sup.len)) raiseIndexError();
						LOC19 = (NimStringDesc*)0;
						LOC19 = csvseq20->data[i_155354_2766820254]; csvseq20->data[i_155354_2766820254] = copyStringRC1(csvparser0.row->data[i_155354_2766820254]);
						if (LOC19) nimGCunrefNoCycle(LOC19);
						nimln(1896, "system.nim");
						TMP718 = addInt(res_155382_2766820254, ((NI) 1));
						res_155382_2766820254 = (NI)(TMP718);
					} LA18: ;
				}
			}
			nimln(57, "csv.nim");
			if ((NU)(c0) >= (NU)(csvseq0->Sup.len)) raiseIndexError();
			genericSeqAssign((&csvseq0->data[c0]), csvseq20, (&NTI16005));
			nimln(58, "csv.nim");
			TMP719 = addInt(c0, ((NI) 1));
			c0 = (NI)(TMP719);
		} LA14: ;
	}
	nimln(61, "csv.nim");
	genericSeqAssign((&result0), csvseq0, (&NTI155267));
	goto BeforeRet;
	}BeforeRet: ;
	popFrame();
	return result0;
}

N_NIMCALL(TY155267*, readall_155386_2766820254)(NimStringDesc* filename0, NimStringDesc* filenameout0, NIM_CHAR separator0, NIM_CHAR quote0, NIM_CHAR escape0, NIM_BOOL skipinitialspace0, NIM_BOOL skipblanklast0) {
	TY155267* result0;
	NimStringDesc* csv0;
	nimfr("readAll", "csv.nim")
{	result0 = (TY155267*)0;
	nimln(72, "csv.nim");
	csv0 = readfile_15666_1689653243(filename0);
	nimln(73, "csv.nim");
	csv0 = nsuStrip(csv0, NIM_TRUE, NIM_TRUE, TMP710);
	nimln(76, "csv.nim");
	result0 = parseall_155210_2766820254(csv0, filenameout0, separator0, quote0, escape0, skipinitialspace0, skipblanklast0);
	goto BeforeRet;
	}BeforeRet: ;
	popFrame();
	return result0;
}

N_NIMCALL(NimStringDesc*, stringifyall_155400_2766820254)(TY155267* csv0, NimStringDesc* separator0, NIM_BOOL escapequotes0, NIM_BOOL quotealways0, NIM_BOOL spacebetweenfields0) {
	NimStringDesc* result0;
	NimStringDesc* delimiter0;
	NimStringDesc* csvstr0;
	nimfr("stringifyAll", "csv.nim")
{	result0 = (NimStringDesc*)0;
	delimiter0 = (NimStringDesc*)0;
	nimln(88, "csv.nim");
	{
		NimStringDesc* LOC5;
		if (!spacebetweenfields0) goto LA3;
		nimln(89, "csv.nim");
		LOC5 = (NimStringDesc*)0;
		LOC5 = rawNewString(separator0->Sup.len + 1);
appendString(LOC5, separator0);
appendString(LOC5, ((NimStringDesc*) &TMP720));
		delimiter0 = LOC5;
	}
	goto LA1;
	LA3: ;
	{
		nimln(91, "csv.nim");
		delimiter0 = copyString(separator0);
	}
	LA1: ;
	nimln(94, "csv.nim");
	csvstr0 = copyString(((NimStringDesc*) &TMP706));
	{
		NI i_155421_2766820254;
		NI HEX3Atmp_155452_2766820254;
		NI res_155455_2766820254;
		i_155421_2766820254 = (NI)0;
		HEX3Atmp_155452_2766820254 = (NI)0;
		nimln(95, "csv.nim");
		HEX3Atmp_155452_2766820254 = (csv0 ? (csv0->Sup.len-1) : -1);
		nimln(1875, "system.nim");
		res_155455_2766820254 = ((NI) 0);
		{
			nimln(1876, "system.nim");
			while (1) {
				NimStringDesc* csvstrrow0;
				NI TMP727;
				if (!(res_155455_2766820254 <= HEX3Atmp_155452_2766820254)) goto LA9;
				nimln(1877, "system.nim");
				i_155421_2766820254 = res_155455_2766820254;
				nimln(97, "csv.nim");
				csvstrrow0 = copyString(((NimStringDesc*) &TMP706));
				{
					NI j_155432_2766820254;
					NI HEX3Atmp_155445_2766820254;
					NI res_155448_2766820254;
					j_155432_2766820254 = (NI)0;
					HEX3Atmp_155445_2766820254 = (NI)0;
					nimln(98, "csv.nim");
					if ((NU)(i_155421_2766820254) >= (NU)(csv0->Sup.len)) raiseIndexError();
					HEX3Atmp_155445_2766820254 = (csv0->data[i_155421_2766820254] ? (csv0->data[i_155421_2766820254]->Sup.len-1) : -1);
					nimln(1875, "system.nim");
					res_155448_2766820254 = ((NI) 0);
					{
						nimln(1876, "system.nim");
						while (1) {
							NimStringDesc* item0;
							NI TMP726;
							if (!(res_155448_2766820254 <= HEX3Atmp_155445_2766820254)) goto LA12;
							nimln(1877, "system.nim");
							j_155432_2766820254 = res_155448_2766820254;
							nimln(101, "csv.nim");
							if ((NU)(i_155421_2766820254) >= (NU)(csv0->Sup.len)) raiseIndexError();
							if ((NU)(j_155432_2766820254) >= (NU)(csv0->data[i_155421_2766820254]->Sup.len)) raiseIndexError();
							item0 = copyString(csv0->data[i_155421_2766820254]->data[j_155432_2766820254]);
							nimln(102, "csv.nim");
							{
								NIM_BOOL LOC15;
								NIM_BOOL LOC17;
								NimStringDesc* LOC21;
								LOC15 = (NIM_BOOL)0;
								LOC15 = escapequotes0;
								if (!(LOC15)) goto LA16;
								LOC17 = (NIM_BOOL)0;
								LOC17 = contains_111028_4286263276(item0, ((NimStringDesc*) &TMP721));
								if (LOC17) goto LA18;
								LOC17 = contains_111028_4286263276(item0, ((NimStringDesc*) &TMP722));
								LA18: ;
								LOC15 = LOC17;
								LA16: ;
								if (!LOC15) goto LA19;
								nimln(103, "csv.nim");
								LOC21 = (NimStringDesc*)0;
								LOC21 = nsuReplaceStr(item0, ((NimStringDesc*) &TMP721), ((NimStringDesc*) &TMP723));
								item0 = nsuReplaceStr(LOC21, ((NimStringDesc*) &TMP722), ((NimStringDesc*) &TMP724));
							}
							LA19: ;
							nimln(106, "csv.nim");
							{
								NimStringDesc* LOC26;
								if (!quotealways0) goto LA24;
								nimln(107, "csv.nim");
								LOC26 = (NimStringDesc*)0;
								LOC26 = rawNewString(item0->Sup.len + 2);
appendString(LOC26, ((NimStringDesc*) &TMP721));
appendString(LOC26, item0);
appendString(LOC26, ((NimStringDesc*) &TMP721));
								item0 = LOC26;
							}
							goto LA22;
							LA24: ;
							{
								NIM_BOOL LOC28;
								NIM_BOOL LOC29;
								NimStringDesc* LOC34;
								nimln(108, "csv.nim");
								LOC28 = (NIM_BOOL)0;
								LOC29 = (NIM_BOOL)0;
								LOC29 = contains_111028_4286263276(item0, ((NimStringDesc*) &TMP721));
								if (LOC29) goto LA30;
								LOC29 = contains_111028_4286263276(item0, ((NimStringDesc*) &TMP722));
								LA30: ;
								LOC28 = LOC29;
								if (LOC28) goto LA31;
								LOC28 = contains_111028_4286263276(item0, separator0);
								LA31: ;
								if (!LOC28) goto LA32;
								nimln(109, "csv.nim");
								LOC34 = (NimStringDesc*)0;
								LOC34 = rawNewString(item0->Sup.len + 2);
appendString(LOC34, ((NimStringDesc*) &TMP721));
appendString(LOC34, item0);
appendString(LOC34, ((NimStringDesc*) &TMP721));
								item0 = LOC34;
							}
							goto LA22;
							LA32: ;
							{
								nimln(111, "csv.nim");
								item0 = quoteifcontainswhite_111018_4286263276(item0);
							}
							LA22: ;
							nimln(114, "csv.nim");
							csvstrrow0 = resizeString(csvstrrow0, item0->Sup.len + 0);
appendString(csvstrrow0, item0);
							nimln(117, "csv.nim");
							{
								nimln(343, "system.nim");
								nimln(117, "csv.nim");
								if ((NU)(i_155421_2766820254) >= (NU)(csv0->Sup.len)) raiseIndexError();
								if (!!((j_155432_2766820254 == (csv0->data[i_155421_2766820254] ? (csv0->data[i_155421_2766820254]->Sup.len-1) : -1)))) goto LA38;
								nimln(118, "csv.nim");
								csvstrrow0 = resizeString(csvstrrow0, delimiter0->Sup.len + 0);
appendString(csvstrrow0, delimiter0);
							}
							LA38: ;
							nimln(1896, "system.nim");
							TMP726 = addInt(res_155448_2766820254, ((NI) 1));
							res_155448_2766820254 = (NI)(TMP726);
						} LA12: ;
					}
				}
				nimln(121, "csv.nim");
				csvstr0 = resizeString(csvstr0, csvstrrow0->Sup.len + 0);
appendString(csvstr0, csvstrrow0);
				nimln(124, "csv.nim");
				{
					nimln(343, "system.nim");
					nimln(124, "csv.nim");
					if (!!((i_155421_2766820254 == (csv0 ? (csv0->Sup.len-1) : -1)))) goto LA42;
					nimln(125, "csv.nim");
					csvstr0 = resizeString(csvstr0, 1);
appendString(csvstr0, ((NimStringDesc*) &TMP714));
				}
				LA42: ;
				nimln(1896, "system.nim");
				TMP727 = addInt(res_155455_2766820254, ((NI) 1));
				res_155455_2766820254 = (NI)(TMP727);
			} LA9: ;
		}
	}
	nimln(128, "csv.nim");
	result0 = copyString(csvstr0);
	goto BeforeRet;
	}BeforeRet: ;
	popFrame();
	return result0;
}

N_NIMCALL(NimStringDesc*, writeall_155459_2766820254)(NimStringDesc* filename0, TY155267* csv0, NimStringDesc* separator0, NIM_BOOL escapequotes0, NIM_BOOL quotealways0, NIM_BOOL spacebetweenfields0) {
	NimStringDesc* result0;
	NimStringDesc* csvstr0;
	nimfr("writeAll", "csv.nim")
{	result0 = (NimStringDesc*)0;
	nimln(140, "csv.nim");
	csvstr0 = stringifyall_155400_2766820254(csv0, separator0, escapequotes0, quotealways0, spacebetweenfields0);
	nimln(143, "csv.nim");
	writefile_15669_1689653243(filename0, csvstr0);
	nimln(146, "csv.nim");
	result0 = copyString(csvstr0);
	goto BeforeRet;
	}BeforeRet: ;
	popFrame();
	return result0;
}
NIM_EXTERNC N_NOINLINE(void, csv_csvInit000)(void) {
	nimfr("csv", "csv.nim")
	popFrame();
}

NIM_EXTERNC N_NOINLINE(void, csv_csvDatInit000)(void) {
}

